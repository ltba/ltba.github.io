<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JavaScript——聆听·彼岸</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="apple-touch-icon" sizes="180x180" href="/images/ico.jpg?v=5.1.4">
<link rel="icon" type="image/png" sizes="32x32" href="/images/ico.jpg?v=5.1.4">
<link rel="icon" type="image/png" sizes="16x16" href="/images/ico.jpg?v=5.1.4">
<style>
#codes{
    width:100%;
}
#result{
    width:100%;
}
</style>
</head>
<body>
作者: <a href="https://yked.gitee.io">聆听·彼岸</a><br>
Blog: <a href="https://yked.gitee.io">https://yked.gitee.io</a><br>
JavaScript教程: <a href="https://www.runoob.com/js/js-tutorial.html">点我</a><br>
本工具仅用于批量操作等JavaScript力所能及的使用。<br>
例如(For example):
<pre>
<code><br>
for (var i=0;i<10;i++){<br>
    打印("&lt;img src='" + i + ".jpg'&gt;&lt;br&gt;\n")<br>
}<br>
</code>
<code><br>
for (var i=10;i<100;i++){<br>
    打印("&lt;img src='" + i + ".jpg'&gt;&lt;br&gt;\n")<br>
}<br>
</code>
<pre>
for(var i=1;i<10;i++){
打印(''+i+'.jpg\n')
}
for(var i=10;i<100;i++){
打印(''+i+'.jpg\n')
}
for(var i=100;i<1000;i++){
打印(''+i+'.jpg\n')
}
function get(data){
return "https://zcdnou01.weilekangnet.com:59666"+data+"/480p/480p.m3u8"
}
</pre>
<br>
<input value="var a=document.createElement('AUDIO'),b='我不去想是否能够成功 既然选择了远方 便只顾风雨兼程 我不去想能否赢得爱情 既然钟情于玫瑰 就勇敢地吐露真诚 我不去想身后会不会袭来寒风冷雨 既然目标是地平线 留给世界的只能是背影 我不去想未来是平坦还是泥泞 只要热爱生命 一切，都在意料之中';a.src='https://ai.baidu.com/aidemo?type=tns&spd=4&pit=5&vol=5&per=4&tex='+b+'&dt=1';a.play();"></input>
注: 打印(是博主自创的，用于在下面的代码框输出字符串。)<br>
句尾分号不能少。
</pre>
<br>
<textarea id="codes" rows="10"></textarea>
<div id='help'></div>
<button type="button" onclick="运行()">运行</button><button type="button" onclick="清空输出()">清空输出</button><br>
<textarea id="result" rows="30" ></textarea>
<script>
var result = document.getElementById("result");
var codes = document.getElementById("codes");

function 执行(string){
    try  {
         eval(string);
         }

    catch(exception) {
         打印(exception);
         }
}

function 打印(string){
    result.value += string;
}
function 运行(){
    console.log(codes.value.replace(/\r/g,"").replace(/\n/g,""));
    执行(codes.value.replace(/\r/g,"").replace(/\n/g,""));
}
function 清空输出(){
    result.value = "";
}
function 弹窗(string){
    alert(string);
}
function 询问(string){
    return confirm(string);
}
function 输入(string){
    return prompt(string);
}
function 方差(数组){
    var 平均数 = 0;
    var 减平均数差 = new Array();
    var 差和 = 0;
    var 结果 = 0;
    for (var i in 数组){
        平均数 += 数组[i];
    }
    平均数 = 平均数/数组.length;
    for (var i=0;i<数组.length;i++){
        减平均数差[i] = (数组[i] - 平均数)*(数组[i] - 平均数);
    }
    for (var i in 减平均数差){
        差和 += 减平均数差[i];
    }
    结果 = 差和/数组.length;
    return 结果;
}
function 中位数(数组){
    var 整齐数组 = 数组.sort(function(a,b){return a-b});
    if( 整齐数组.length%2 ==0 ){
      var first = 整齐数组[整齐数组.length/2-1];
      var second = 整齐数组[(整齐数组.length/2)];
      return (first+second)/2;
    }else{
      return 整齐数组[(整齐数组.length-1)/2];
    }
}
function 平均数(数组){
    var 总数 = 0;
    for (i in 数组){
        总数 += 数组[i];
    }
    return 总数/数组.length;
}
function 循环(次数,字符串代码){
    for(var i=0;i<次数;i++){
        执行(字符串代码.replace(/\n/g,"\\n"))
    }
}
function 遍历(数组或字典,类型1或2,字符串代码){
    if(类型1或2==1){
        for(var value of 数组或字典){
            eval(字符串代码.replace(/\n/g,"\\n"))
        }
    }else if(类型1或2==2){
        for(var key in 数组或字典){
            var value=数组或字典[key];
            eval(字符串代码.replace(/\n/g,"\\n"))
        }
    }
}
function 函数(字符串函数名,参数字符串数组,字符串代码){
    var 参数='',str;
    for(var i in 参数字符串数组){
        参数+=参数字符串数组[i]+','
    }
    参数=参数.substr(0,参数.length-1);
    str='window.'+字符串函数名+'=function('+参数+'){'+字符串代码+'}';
    执行(str);
}
function 回归系数(x,y){
     var f=function (被减数,减数){
     var r1,r2,m,n; 
     try{r1=被减数.toString().split(".")[1].length}catch(e){r1=0} 
     try{r2=减数.toString().split(".")[1].length}catch(e){r2=0} 
     m=Math.pow(10,Math.max(r1,r2)); 
     n=(r1>=r2)?r1:r2; 
     return Number(((被减数*m-减数*m)/m).toFixed(n)); }

    var b=b1=b2=a=a1 = 0;
    var x1=y1=0;
    
    x1=平均数(x);
    y1=平均数(y);
    for(let i in x){
        b1=b+(x[i]-x1)*(y[i]-y1);
    }
    for(let i in x){
        b2=b2+(x[i]-x1)*(x[i]-x1);
    }
    b=b1/b2;
    a=f(y1,b*x1);
    return ["系数a："+a,"系数b："+b];
}
//独立性检验
function 卡方(a,b,c,d,relevant="x与y"){
    var f = function (arg1,arg2)
    {
     var m=0,s1=arg1.toString(),s2=arg2.toString();
     try{m+=s1.split(".")[1].length}catch(e){}
     try{m+=s2.split(".")[1].length}catch(e){}
     return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)
    };
    var k,n,relevants;
    n=a+b+c+d;
    k=n*(a*d-b*c)*(a*d-b*c)/((a+b)*(a+c)*(b+d)*(c+d));
    k=Math.round(f(k,1000))/1000;
    if(k>=10.828){relevants="有99.9%的把握认为“"+relevant+"”有关"}
    else if(k>=6.635){relevants="有99%的把握认为“"+relevant+"”有关"}
    else if(k>=5.024){relevants="有97.5%的把握认为“"+relevant+"”有关"}
    else if(k>=3.841){relevants="有95%的把握认为“"+relevant+"”有关"}
    else if(k>=2.706){relevants="有90%的把握认为“"+relevant+"”有关"}
    else{relevants="没有证据认为“"+relevant+"”有关"}
    return ["K²="+k,relevants];
}

/*
document.body.onload=function(){
    var ref = document.referrer;
    if (ref.indexOf("yked.gitee.io")==-1){
        alert("请从本博客进来！");
        location.href="https://www.baidu.com/s?wd=%E8%81%86%E5%90%AC%C2%B7%E5%BD%BC%E5%B2%B8";
    }
}
*/
function creatButton(name){
    var b = document.createElement("BUTTON");
    var d = document.getElementById("help");
    b.innerHTML=name;
    b.onclick=function(){codes.value+=name};
    if(name=="close"){b.onclick=function(){d.style.display="none"};}
    d.appendChild(b);
}
creatButton("(");
creatButton(")");
creatButton("{");
creatButton("}");
creatButton(".");
creatButton("\"");
creatButton("\'");
creatButton(";");
creatButton(",");
creatButton("|");
creatButton("\\");
creatButton("!");
creatButton("?");
creatButton("<");
creatButton(">");
creatButton("[");
creatButton("]");
creatButton("+");
creatButton("-");
creatButton("*");
creatButton("/");
creatButton("%");
creatButton("$");
creatButton("&");
creatButton("close");
function getscript(url){
var xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange=function(){
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
eval(xmlhttp.responseText);
}
};
xmlhttp.open("GET",url,true);
xmlhttp.send();
}
</script>

<br>
可用函数: <br>
打印(字符串)，<br>
弹窗(字符串)，<br>
询问(字符串)返回true或者false，<br>
输入(字符串)返回用户输入信息，<br>
方差(数组)返回方差，<br>
中位数(数组)返回中位数，<br>
平均数(数组)返回平均数，<br>
函数(字符串函数名,参数字符串数组,字符串代码)，<br>
循环(次数,字符串代码)，<br>
遍历(数组或字典,类型1或2)内参key和value或value，<br>
回归系数(数组x,数组y)返回a,b，<br>
卡方(a,b,c,d,relevance)返回k²,relevances，<br>
getscript(url): 导入外部js，例如: <input value='getscript("https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js")'></input><br>
以及JavaScript的所有函数。<br><br>
数据类型定义:<br>
字符串: 用双引号(或单引号)括起来的<br>
整型: 即数字<br>
逻辑型: True和False，只有两个，分别代表真假<br>
数组: 类似这样[1,2,3,4,5]的<br>
字典: 类似这样{"1":1,"2":2,"3":3,"4":4,"5":5}的<br>
</body>
</html>